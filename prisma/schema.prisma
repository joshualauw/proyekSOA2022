generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  user_id       Int         @id @default(autoincrement())
  email         String      @unique
  name          String
  password      String
  nomor_telepon String      @unique
  api_key       String      @unique
  tipe_user     TipeUser    @default(free)
  Watchlist     Watchlist[]
}

model Watchlist {
  watchlist_id Int    @id @default(autoincrement())
  api_key_ref  Users  @relation(fields: [api_key], references: [api_key])
  api_key      String
  symbol       String @unique
  name         String
}

model Transfer{
  trans_id Int         @id @default(autoincrement())
  user_id_ref Int
  photo String      @unique
  date_upload DateTime   @default(now())
  status StatusTrans @default(pending)
}

enum TipeUser {
  free
  premium
}

enum StatusTrans {
  pending
  success
}

// == CARA JALANKAN PRISMA ==
// 1. npm install
// 2. kalo ada perubahan di schema.prisma jangan lupa npx prisma migrate dev --name <nama_perubahan>
// 3. jalankan npx prisma generate buat update prisma client
// 4. require helpers/db.js
